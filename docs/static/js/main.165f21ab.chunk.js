(this["webpackJsonpxx-space"]=this["webpackJsonpxx-space"]||[]).push([[0],{171:function(e,t,n){e.exports=n(330)},177:function(e,t,n){},206:function(e,t,n){},207:function(e,t,n){},328:function(e,t,n){},330:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"setIssues",(function(){return B})),n.d(a,"setIssue",(function(){return A})),n.d(a,"setIssueEdit",(function(){return M}));var r=n(0),o=n.n(r),s=n(28),i=n.n(s),l=(n(176),n(177),n(332),n(63)),c=n(30),u=n(31),d=n(33),m=n(24),g=n(32),f=n(47),p=n(166),b=n(48),h=n(16),v=n(49),y=n(169),E=n(170),S=n(118),w=n.n(S),I=n(53),O=n(157),C=Symbol("SET_CONFIG"),k=Symbol("SET_PAGEINFO"),j=Symbol("SET_NEXTPAGE"),P=(Symbol("SET_PREVIOUSPAGE"),Symbol("GET_STATE"),Symbol("SET_ISSUE")),N=Symbol("SET_ISSUES");Symbol("SET_CLIENT"),Symbol("SET_REPOS"),Symbol("SET_ISSUE_ADD_STATUS");var $=Object(I.c)({setIssue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return e=t.data,Object.assign({},e);default:return e}},setIssues:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return e.issues=t.data,console.log("\u5f97\u5230",e,"data",t,t.type),Object.assign({},e);default:return e}},setConfig:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return e.config=t.data,e.client=t.data.client,e.variables={owner:t.data.owner,name:t.data.name,first:10,after:null},Object.assign({},e);case k:return e.pageInfo=e.data,Object.assign({},e);case j:return e.variables.after=t.data,Object.assign({},e);default:return e}}}),L=Object(I.d)($,Object(I.a)(O.a)),T=n(335),x=n(343),D=n(337),H=n(336),B=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e){console.log("setIssues\u5409\u7965\u7269")}},A=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e){console.log("setIssue\u5409\u7965\u7269")}},M=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e){console.log("setIssueEdit\u5409\u7965\u7269"),e({type:P,data:{edit:"\u5409\u7965\u7269"}})}},_=B,q=A,U=M,z=n(25),G=n(26),J=n.n(G);function F(){var e=Object(z.a)(["\nquery Issues($owner:String!, $name:String!, $number: Int!, $first: Int!, $after: String){\n  repository(owner: $owner, name: $name) {\n    issue(number: $number){\n      id\n      number\n      title\n      bodyHTML\n      body\n      createdAt\n      labels(first:$first,after:$after){\n        edges{\n          node{\n            id\n            name\n            color\n            description\n            url\n          }\n        }\n      }\n    }\n  }\n}\n"]);return F=function(){return e},e}var R=J()(F());function W(){var e=Object(z.a)(["\nquery IssueComment($owner:String!, $name:String!, $number: Int!, $first: Int!, $after: String){\n  repository(owner: $owner, name: $name) {\n    issue(number: $number){\n      id\n\t\t\tcomments(first:$first,after:$after){\n       \tpageInfo {\n            endCursor\n            startCursor\n            hasNextPage\n            hasPreviousPage\n        }\n        edges{\n          node{\n            id\n            body\n            bodyHTML\n            bodyText\n          }\n        }\n      }\n    }\n  }\n}\n"]);return W=function(){return e},e}var V=J()(W());function X(){var e=Object(z.a)(["\nquery Issues($owner:String!, $name:String!, $first: Int!, $after: String){\n    repository(owner: $owner, name: $name) {\n        issues(first: $first, after: $after, orderBy:{field:CREATED_AT,direction:DESC}){\n            totalCount\n            pageInfo {\n                endCursor\n                startCursor\n                hasNextPage\n                hasPreviousPage\n            } \n            edges {\n                node {\n                    id\n                    number\n                    title\n                    bodyHTML\n                    body\n                    author{\n                        login\n                    }\n                    createdAt\n                    comments {\n                        totalCount\n                    }\n                    labels(first:10){\n                        edges{\n                            node{\n                                id\n                                name\n                                color\n                                description\n                            }\n                        }\n                    }\n                    reactions(content:HEART){\n                        totalCount\n                    }\n                }\n            }\n        }\n    }\n}\n"]);return X=function(){return e},e}var K=J()(X());function Q(){var e=Object(z.a)(["\nquery IssuesLabels($owner: String!, $name: String!, $first: Int!, $after: String) {\n  repository(owner: $owner, name: $name) {\n    labels(first: $first, after: $after) {\n      totalCount\n      pageInfo {\n        endCursor\n        startCursor\n        hasNextPage\n        hasPreviousPage\n      }\n      edges {\n        node {\n          id\n          description\n          color\n          url\n          name\n        }\n      }\n    }\n  }\n}\n"]);return Q=function(){return e},e}var Y=J()(Q());function Z(){var e=Object(z.a)(["\nmutation CreateIssuePayload($repositoryId:ID!,$title:String!,$body:String!,$labelIds:[ID!]){\n  createIssue(input:{ repositoryId:$repositoryId,title:$title,,body:$body, labelIds: $labelIds}){\n   \tissue{\n\t  id\n      number\n      title\n      bodyHTML\n      body\n      author{\n        login\n      }\n      createdAt\n      labels(first:10){\n        edges{\n          node{\n            id\n            name\n            color\n            description\n          }\n        }\n      }\n    }\n  }\n}\n"]);return Z=function(){return e},e}var ee=J()(Z());function te(){var e=Object(z.a)(["\nmutation AddCommentPayload($subjectId: ID!,$body:String!){\n  addComment(input:{subjectId:$subjectId,body:$body}){\n    commentEdge{\n      node{\n        id\n        body\n        bodyHTML\n        bodyText\n      }\n    }\n  }\n}\n"]);return te=function(){return e},e}var ne=J()(te());function ae(){var e=Object(z.a)(["\nmutation UpdateIssuePayload($id:ID!,$state:IssueState,$title:String!,$body:String!,$labelIds:[ID!]){\n  updateIssue(input:{ id:$id,state:$state,title:$title,,body:$body, labelIds: $labelIds}){\n   \tissue{\n\t\t\tid\n      number\n      title\n      bodyHTML\n      body\n      author{\n        login\n      }\n      state\n      createdAt\n      labels(first:10){\n        edges{\n          node{\n            id\n            description\n            color\n            url\n            name\n          }\n        }\n      }\n    }\n  }\n}\n"]);return ae=function(){return e},e}var re=J()(ae()),oe=R,se=V,ie=K,le=Y,ce=ee,ue=ne,de=re,me=n(334),ge=function(e){return o.a.createElement(me.a,{query:se,variables:e.variables,notifyOnNetworkStatusChange:!0},(function(e){var t=e.loading,n=e.error,a=e.data;e.refetch,e.networkStatus,e.fetchMore;if(t)return o.a.createElement("p",null,"Loading...");if(n)return console.log(n),o.a.createElement("p",null,"Error :(");var r=a.repository.issue.comments.edges,s=a.repository.issue.comments.pageInfo;return localStorage.setItem("commentPageInfo",JSON.stringify(s)),localStorage.setItem("commentsLodding",!1),o.a.createElement(o.a.Fragment,null,r.map((function(e){return o.a.createElement(x.a,{className:"post-comment",border:"light",key:e.node.id},o.a.createElement(x.a,{border:"light",dangerouslySetInnerHTML:{__html:e.node.bodyHTML}}))})))}))},fe=(n(206),n(342)),pe=n(340),be=n(341),he=n(161),ve=n(339),ye=(n(207),function(e){return o.a.createElement(me.a,{query:le,variables:e.variables,notifyOnNetworkStatusChange:!0,fetchPolicy:"cache-and-network"},(function(t){var n=t.loading,a=t.error,r=t.data;t.refetch,t.networkStatus,t.fetchMore;if(n)return o.a.createElement("p",null,"Loading...");if(a)return o.a.createElement("p",null,"Error :(");console.log("\u53d8\u91cf",e.variables);var s=r.repository.labels.edges,i=r.repository.labels.pageInfo;localStorage.setItem("pageInfo",JSON.stringify(i));var l=s.map((function(e){return o.a.createElement(T.a,null,e.node.name)}));return o.a.createElement(x.a,{border:"light",className:"Labels-wrapper"},o.a.createElement("div",null,l))}))}),Ee=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).toIndex=function(e){n.props.history.push("/")},n.onToAddNewSpace=function(e){n.props.history.push("/edit/new")},n.onShowLabels=function(){n.setState({showLabels:!0})},n.onLabelsClose=function(){n.setState({showLabels:!1})},n.state={title:"head",desc:"\u663e\u793a\u5173\u4e8e\u5e94\u7528\u4e2d\u7684\u5934\u90e8\u7684\u4fe1\u606f",message:"test",spaces:[],showLabels:!1},n}return Object(g.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return o.a.createElement(fe.a,{className:"Header",bg:"light",expand:"lg"},o.a.createElement(fe.a.Brand,{href:"#"},"GitHub\u7a7a\u95f4"),o.a.createElement(fe.a.Toggle,{"aria-controls":"basic-navbar-nav"}),o.a.createElement(fe.a.Collapse,{id:"basic-navbar-nav"},o.a.createElement(pe.a,{className:"mr-auto"},o.a.createElement(pe.a.Link,{onClick:function(t){return e.onToAddNewSpace()}},"\u589e\u52a0"),o.a.createElement(pe.a.Link,{onClick:function(t){return e.onShowLabels()}},"\u6807\u7b7e"),o.a.createElement(pe.a.Link,{onClick:function(t){return e.props.history.go(-1)}},"\u8fd4\u56de")),o.a.createElement(be.a,{inline:!0},o.a.createElement(he.a,{type:"text",placeholder:"Search",className:"mr-sm-2"}),o.a.createElement(H.a,{varint:"outline-success"},"Search"))),o.a.createElement(ve.a,{show:this.state.showLabels,onHide:function(t){return e.onLabelsClose()},animation:!1},o.a.createElement(ve.a.Header,{closeButton:!0},o.a.createElement(ve.a.Title,null,"\u663e\u793a\u6807\u7b7e")),o.a.createElement(ve.a.Body,null,o.a.createElement(ye,{variables:this.props.state.setConfig.variables})),o.a.createElement(ve.a.Footer,null,o.a.createElement(H.a,{variant:"secondary",onClick:function(t){return e.onLabelsClose()}},"Close"))))}}]),t}(r.Component);function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ie=function(e){function t(e){var n;Object(c.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).scrollNew=function(){var e=document.documentElement.scrollHeight,t=document.documentElement.scrollTop,a=document.documentElement.clientHeight,r=localStorage.getItem("commentsLodding");t+a>e-2&&"lodding"!==r&&(n.getIssueComment(),localStorage.setItem("commentsLodding","lodding"))},n.handleClick=function(){},n.getChilder=function(e){},n.getIssueComment=function(){var e=JSON.parse(localStorage.getItem("commentPageInfo")),t=e.endCursor,a=n.props.state.setConfig.variables;if(a.after=t,a.number=parseInt(n.state.number),e.hasNextPage){var r=o.a.createElement(ge,{key:e.endCursor,variables:a,props:we({},n.props)}),s=n.state.newPages;s.push(r),n.setState({newPages:s})}else alert("\u6ca1\u6709\u66f4\u591a\u4e86")},n.onCommentChange=function(e){var t=e.target.value;console.log(t,e),n.setState({comment:t})},n.onUserChange=function(e){var t=e.target.value;console.log(t,e),n.setState({user:t}),localStorage.setItem("user",t)},n.onAddComment=function(){var e=n.props.state.setConfig.client,t={subjectId:n.state.issue.id,body:n.state.comment+"\n\u8054\u7cfb\u65b9\u5f0f:"+n.state.user};e.mutate({mutation:ue,variables:t}).then((function(e){console.log("add issue comment",e);var t=e.data.addComment.commentEdge.node;n.setState({issueComment:t})}))};var a=e.match.params,r=a.number?a.number:6;return n.state={description:"\u663e\u793apost\u7684\u9875\u9762",number:r,newPages:[]},n}return Object(g.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.number;localStorage.setItem("commentPageInfo",JSON.stringify({endCursor:null,hasNextPage:!0})),localStorage.setItem("commentsLodding",!1),console.log("Post\u521d\u59cb\u5316",t);var n=this.props.state.setConfig,a=n.config,r=n.client,o={owner:a.owner,name:a.name,number:parseInt(t),first:100,after:null};r.query({query:oe,variables:o}).then((function(t){e.setState({HasIssue:!0,issue:t.data.repository.issue})})),this.getIssueComment(),window.addEventListener("scroll",this.scrollNew);var s=localStorage.getItem("user");this.setState({user:s})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.scrollNew)}},{key:"render",value:function(){var e,t=this;if(this.state.HasIssue){var n=this.state.issue,a=n.labels.edges.map((function(e){return o.a.createElement(T.a,{pill:!0,style:{backgroundColor:"#"+e.node.color},id:e.node.id,key:e.node.id,title:e.node.description},e.node.name)}));e=o.a.createElement(x.a,{className:"post-comments"},o.a.createElement("div",null,n.title),o.a.createElement("div",null,a),o.a.createElement(x.a,{border:"light",dangerouslySetInnerHTML:{__html:n.bodyHTML}}))}return o.a.createElement(D.a,{className:"xx-space-post"},o.a.createElement(Ee,this.props),e,o.a.createElement(x.a,{className:"post-add-comments",border:"dark"},o.a.createElement("div",{className:"post-add-comments-title"},"\u6dfb\u52a0\u8bc4\u8bba"),o.a.createElement("textarea",{className:"post-add-comment-textarea",onChange:function(e){return t.onCommentChange(e)},rows:"4"}),o.a.createElement("input",{id:"post-user",onChange:function(e){return t.onUserChange(e)},defaultValue:this.state.user,placeholder:"\u8054\u7cfb\u65b9\u5f0f\uff1a"}),o.a.createElement(H.a,{onClick:function(e){return t.onAddComment()}},"\u786e\u5b9a")),o.a.createElement(x.a,{border:"info",className:"post-comments"},o.a.createElement("div",{className:"post-comments-title"},"\u663e\u793a\u8bc4\u8bba"),this.state.newPages.map((function(e){return e})),this.state.issueComment?o.a.createElement(x.a,{dangerouslySetInnerHTML:{__html:this.state.issueComment.bodyHTML}}):""))}}]),t}(r.Component),Oe=Object(f.b)((function(e){return console.log("state \u6620\u5c04",e),{state:e}}),(function(e,t){return{setIssue:function(t){e(q(t))}}}))(Ie),Ce=function(e){return o.a.createElement(me.a,{query:ie,variables:e.variables,notifyOnNetworkStatusChange:!0,fetchPolicy:"cache-and-network"},(function(t){var n=t.loading,a=t.error,r=t.data;t.refetch,t.networkStatus,t.fetchMore;if(n)return o.a.createElement("p",null,"Loading...");if(a)return o.a.createElement("p",null,"Error :(");var s=r.repository.issues.edges,i=r.repository.issues.pageInfo;localStorage.setItem("pageInfo",JSON.stringify(i)),localStorage.setItem("issuesLodding",!1);var l=function(e){var t="https://github.com/abearxiong/abearxiong.github.io/issues/"+e;window.open(t)},c=s.map((function(t){var n=new Date(t.node.createdAt),a=t.node.labels.edges.map((function(e){return o.a.createElement(T.a,{pill:!0,style:{backgroundColor:"#"+e.node.color},id:e.node.id,key:e.node.id,title:e.node.description},e.node.name)}));return o.a.createElement(x.a,{key:t.node.id},o.a.createElement(x.a.Header,{onClick:function(e){return l(t.node.number)}},t.node.title,o.a.createElement(T.a,{variant:"light",onClick:function(n){return function(t,n){t.stopPropagation(),console.log("editIssues",void 0),e.props.history.push("/edit/"+n)}(n,t.node.number)},title:t.node.id},"\u7f16\u8f91")),o.a.createElement(x.a.Title,null,n.toLocaleString()),o.a.createElement(x.a.Body,{onClick:function(n){return function(t,n){t.stopPropagation(),console.log("editIssues",void 0),e.props.history.push("/post/"+n)}(n,t.node.number)}},a,o.a.createElement(x.a,{border:"light",dangerouslySetInnerHTML:{__html:t.node.bodyHTML}})),o.a.createElement(x.a.Footer,null,o.a.createElement(T.a,{variant:"light",onClick:function(e){return l(t.node.number)}},o.a.createElement("g-emoji",{alias:"heart","fallback-src":"https://github.githubassets.com/images/icons/emoji/unicode/2764.png",class:"emoji mr-1"},"\u2764\ufe0f"),t.node.reactions.totalCount),o.a.createElement(T.a,{variant:"light",onClick:function(e){return l(t.node.number)}},o.a.createElement("g-emoji",{class:"g-emoji",alias:"speech_balloon","fallback-src":"https://github.githubassets.com/images/icons/emoji/unicode/1f4ac.png"},"\ud83d\udcac"),t.node.comments.totalCount)))}));return o.a.createElement(x.a,{border:"light",className:"issues-wrapper"},c)}))};function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pe=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).scrollNew=function(){var e=document.documentElement.scrollHeight,t=document.documentElement.scrollTop,a=document.documentElement.clientHeight,r=localStorage.getItem("issuesLodding");t+a>e-2&&"lodding"!==r&&(n.getNewPage(),localStorage.setItem("issuesLodding","lodding"))},n.getNewPage=function(){var e=JSON.parse(localStorage.getItem("pageInfo")),t=e.endCursor,a=n.props.state.setConfig.variables;if(a.after=t,!e.hasNextPage)return alert("\u6ca1\u6709\u66f4\u591a\u4e86"),void window.removeEventListener("scroll",n.scrollNew);var r=o.a.createElement(Ce,{key:e.endCursor,variables:a,props:je({},n.props),getNextPage:n.getNextPage}),s=n.state.newPages;s.push(r),n.setState({newPages:s})},n.state={title:"\u9996\u9875",description:"\u8fd9\u91cc\u662f\u663e\u793a\u5185\u5bb9\u7684\u4e3b\u9875",message:"test",spaces:[],newPages:[],lastPageInfo:{}},n}return Object(g.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){localStorage.setItem("pageInfo",JSON.stringify({endCursor:null,hasNextPage:!0})),localStorage.setItem("issuesLodding",!1),window.addEventListener("scroll",this.scrollNew),this.getNewPage()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.scrollNew)}},{key:"render",value:function(){return o.a.createElement(D.a,{className:"xx-space"},o.a.createElement(Ee,this.props),o.a.createElement(x.a,{border:"light"},this.state.newPages.map((function(e){return e}))))}}]),t}(r.Component),Ne=Object(f.b)((function(e){return console.log("state \u6620\u5c04",e),{state:e}}),(function(e,t){return{setIssues:function(t){e(_(t))}}}))(Pe),$e=n(338),Le=n(168),Te=n(40),xe=function(e){function t(e){var n;Object(c.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).getType=function(e){switch(e){case"*":case"-":case"+":return"list-item";case">":return"block-quote";case"#":return"heading-one";case"##":return"heading-two";case"###":return"heading-three";case"####":return"heading-four";case"#####":return"heading-five";case"######":return"heading-six";default:return null}},n.onChangeTitle=function(e){var t=e.target.value;t!==n.state.title&&localStorage.setItem("title",t),n.setState({title:t})},n.onValueChange=function(e){var t=e.value;t.document!==n.state.value.document&&localStorage.setItem("content",Te.a.serialize(t)),n.setState({value:t})},n.onClickAddNewPost=function(){var e=n.props.state.setConfig,t=e.client,a=e.config,r=Te.a.serialize(n.state.value),o=n.state.title,s=n.state.labelEdges.map((function(e){return e.node.isChecked?e.node.id:null}));s=s.filter((function(e){return null!==e}));var i={repositoryId:a.repositoryId,labelIds:s,body:r,title:o};t.mutate({mutation:ce,variables:i}).then((function(e){n.props.history.push("/")})),localStorage.removeItem("title"),localStorage.removeItem("content")},n.onClickEditOldPost=function(){var e=n.props.state.setConfig.client,t=Te.a.serialize(n.state.value),a=n.state.title,r=n.state.issueState,o=n.state.labelEdges.map((function(e){return e.node.isChecked?e.node.id:null}));o=o.filter((function(e){return null!==e}));var s={id:n.state.issue.id,state:r,labelIds:o,body:t,title:a};console.log(t,o,s,typeof n.state.issue.id),e.mutate({mutation:de,variables:s}).then((function(e){n.props.history.push("/")})),localStorage.removeItem("title"),localStorage.removeItem("content")},n.onClickReturn=function(){n.props.history.push("/")},n.onShowCheckbox=function(e){var t=e.target.checked,a=e.target.value,r=n.state.labelEdges;r[a].node.isChecked=!!t,n.setState({labelEdges:r}),console.log("this.labels",n.state.labelEdges)},n.renderBlock=function(e,t,n){var a=e.attributes,r=e.children;switch(e.node.type){case"block-quote":return o.a.createElement("blockquote",a,r);case"bulleted-list":return o.a.createElement("ul",a,r);case"heading-one":return o.a.createElement("h1",a,r);case"heading-two":return o.a.createElement("h2",a,r);case"heading-three":return o.a.createElement("h3",a,r);case"heading-four":return o.a.createElement("h4",a,r);case"heading-five":return o.a.createElement("h5",a,r);case"heading-six":return o.a.createElement("h6",a,r);case"list-item":return o.a.createElement("li",a,r);default:return n()}},n.onKeyDown=function(e,t,a){switch(e.key){case" ":return n.onSpace(e,t,a);case"Backspace":return n.onBackspace(e,t,a);case"Enter":return n.onEnter(e,t,a);default:return a()}},n.onSpace=function(e,t,a){var r=t.value,o=r.selection;if(o.isExpanded)return a();var s=r.startBlock,i=o.start,l=s.text.slice(0,i.offset).replace(/\s*/g,""),c=n.getType(l);return c?"list-item"===c&&"list-item"===s.type?a():(e.preventDefault(),t.setBlocks(c),"list-item"===c&&t.wrapBlock("bulleted-list"),void t.moveFocusToStartOfNode(s).delete()):a()},n.onBackspace=function(e,t,n){var a=t.value,r=a.selection;if(r.isExpanded)return n();if(0!==r.start.offset)return n();var o=a.startBlock;if("paragraph"===o.type)return n();e.preventDefault(),t.setBlocks("paragraph"),"list-item"===o.type&&t.unwrapBlock("bulleted-list")},n.onEnter=function(e,t,a){var r=t.value,o=r.selection,s=o.start,i=o.end;if(o.isExpanded)return a();var l=r.startBlock;return 0===s.offset&&0===l.text.length?n.onBackspace(e,t,a):i.offset!==l.text.length?a():"heading-one"!==l.type&&"heading-two"!==l.type&&"heading-three"!==l.type&&"heading-four"!==l.type&&"heading-five"!==l.type&&"heading-six"!==l.type&&"block-quote"!==l.type?a():(e.preventDefault(),void t.splitBlock().setBlocks("paragraph"))};var a=e.match.params,r=a.number?a.number:"new";return n.state={msg:"msg hhh",number:r,value:Te.a.deserialize("\u771f\u662f\u5f00\u5fc3\u554a"),createdAt:(new Date).toLocaleString(),titleStyle:{color:"#cccccc",fontSize:10},labelEdges:[],issue:{labels:{edges:[]}}},n}return Object(g.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.state.setConfig.client,n=this.props.state.setConfig.config;t.query({query:le,variables:{owner:n.owner,name:n.name,first:100}}).then((function(t){var n=t.data.repository.labels.edges;e.setState({labelEdges:n})}));var a=this.props.setIssueEdit,r=this.state.number;if(a(),"new"===r){var o=new Date,s=Math.floor((o-1443365529298)/864e5)+1,i=o.getDay(),l="\u5947\u5e7b\u65c5\u7a0b".concat(s," ").concat(["\u661f\u671f\u5929","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"][i]);l=localStorage.getItem("title")?localStorage.getItem("title"):l;var c=localStorage.getItem("content")?localStorage.getItem("content"):"\u771f\u662f\u5f00\u5fc3\u554a";this.setState({title:l,value:Te.a.deserialize(c)})}else t.query({query:oe,variables:{owner:n.owner,name:n.name,number:parseInt(r),first:100,after:null}}).then((function(t){var n=t.data.repository.issue,a=n.labels.edges.map((function(e){return e.node.name}));e.setState({isUpdate:!0,issue:n,issueLables:a,issueState:"OPEN",title:n.title,value:Te.a.deserialize(n.body)});var r=e.state.labelEdges;r.map((function(e){return a.includes(e.node.name)&&(e.node.checked=!0,e.node.isChecked=!0),e})),e.setState({labelEdges:r})}))}},{key:"render",value:function(){var e=this,t=o.a.createElement(H.a,{onClick:function(t){return e.onClickAddNewPost(t)}},"\u589e\u52a0"),n=o.a.createElement(H.a,{variant:"dark",onClick:function(t){return e.onClickReturn(t)}},"\u8fd4\u56de"),a=o.a.createElement(x.a,{border:"light",style:this.state.titleStyle},this.state.createdAt),r=o.a.createElement(Le.a,{placeholder:"\u7f16\u8f91\u7684\u5185\u5bb9",value:this.state.value,onChange:this.onValueChange}),s=this.state.labelEdges.map((function(t,n){return o.a.createElement(be.a.Check,{key:t.node.id,type:"checkbox",name:"check-labels",label:t.node.name,value:n,onChange:function(t){return e.onShowCheckbox(t)},hidden:t.node.hidden,defaultChecked:t.node.checked})}));return this.state.isUpdate&&(t=o.a.createElement(H.a,{onClick:function(t){return e.onClickEditOldPost(t)}},"\u66f4\u65b0"),a=o.a.createElement(x.a.Title,{style:this.state.titleStyle},new Date(this.state.issue.createdAt).toLocaleString())),o.a.createElement(D.a,{className:"xx-space-edit"},o.a.createElement(Ee,this.props),o.a.createElement(x.a,null,o.a.createElement(x.a,{className:"edit-content"},o.a.createElement(x.a.Header,null,o.a.createElement(be.a.Control,{type:"text",onChange:function(t){return e.onChangeTitle(t)},placeholder:"\u6807\u9898",defaultValue:this.state.title})),o.a.createElement("div",null,this.state.issue.labels.edges.map((function(e){return o.a.createElement(T.a,{pill:!0,style:{backgroundColor:"#"+e.node.color},id:e.node.id,key:e.node.id,title:e.node.description},e.node.name)}))),o.a.createElement(x.a.Body,null,o.a.createElement(x.a,{className:"edit-wrapper",border:"light"},o.a.createElement(x.a,{className:"edit",border:"light"},r),o.a.createElement(x.a,{className:"edit-aside",border:"light"},a,o.a.createElement("div",{style:{marginTop:20},title:"\u8981\u70b9\u4e24\u4e0b"},s)))),o.a.createElement(x.a.Footer,null,o.a.createElement(x.a,null,o.a.createElement($e.a,null,t,n))))))}}]),t}(r.Component),De=Object(f.b)((function(e){return console.log("state \u6620\u5c04",e),void 0!==e.setIssue.data&&(window.location.href="/"),{state:e}}),(function(e,t){return{setIssueEdit:function(t){e(U(t))}}}))(xe);n(328);function He(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?He(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):He(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ae={key:"xx-space",token:"U2FsdGVkX19B3HPXWKdG/BW8oy5ld+5t4WogKry+ve6B0RWRGtSjQlGr32zwr4nn7zBE9woFkj4mWNj8jZv1dg==",owner:"abearxiong",name:"abearxiong.github.io",repositoryId:"MDEwOlJlcG9zaXRvcnkxMjM4ODY3NzE="},Me=w.a.AES.decrypt(Ae.token,Ae.key).toString(w.a.enc.Utf8),_e=new E.a({uri:"https://api.github.com/graphql",headers:{Authorization:"Bearer ".concat(Me)}}),qe=new v.a({link:_e,cache:new y.a}),Ue=function(e){function t(e){var n;return Object(c.a)(this,t),n=Object(d.a)(this,Object(m.a)(t).call(this,e)),L.dispatch({type:C,data:Be({},Ae,{client:qe})}),n.state={description:"\u8bbe\u7f6e\u5173\u4e8e\u8d77\u59cb\u663e\u793a\u7684\u5730\u65b9"},n}return Object(g.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return o.a.createElement(f.a,{store:L},o.a.createElement(h.a,{client:qe},o.a.createElement(p.a,null,o.a.createElement(b.d,null,o.a.createElement(b.b,{path:"/",exact:!0,component:Ne}),o.a.createElement(b.b,{path:"/post/:number",component:Oe}),o.a.createElement(b.b,{path:"/edit/:number",component:De}),o.a.createElement(b.a,{to:"/"})))))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(Ue,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[171,1,2]]]);
//# sourceMappingURL=main.165f21ab.chunk.js.map