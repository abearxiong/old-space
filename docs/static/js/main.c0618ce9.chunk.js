(window["webpackJsonpxx-space"]=window["webpackJsonpxx-space"]||[]).push([[0],{132:function(e,t,n){e.exports=n(273)},138:function(e,t,n){},167:function(e,t,n){},271:function(e,t,n){},273:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"setConfig",(function(){return q})),n.d(a,"setIssues",(function(){return z})),n.d(a,"setIssue",(function(){return F})),n.d(a,"setIssueAdd",(function(){return J})),n.d(a,"setRepos",(function(){return W}));var r=n(0),o=n.n(r),s=n(45),c=n.n(s),i=(n(137),n(138),n(275),n(19)),l=n(20),u=n(24),d=n(21),m=n(23),h=n(34),p=n(38),f=n(119),g={config:{},pageTitle:"\u9996\u9875",user:[]},b=(Symbol("SET_CONFIG"),Symbol("GET_STATE"),Symbol("SET_ISSUE")),v=Symbol("SET_ISSUES"),y=(Symbol("SET_CLIENT"),Symbol("SET_REPOS"));var E=Object(p.c)({setIssue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g.config,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return e.issue=t.data,Object.assign({},e);default:return e}},setIssues:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g.config,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return e.issues=t.data,console.log("\u5f97\u5230",e,"data",t,t.type),Object.assign({},e);default:return e}}}),k=Object(p.d)(E,Object(p.a)(f.a)),I=n(89),C=n(35),w=n(280),S=n(276),j=n(281),x=n(122),O=n(130),T=n(131),A=n(67),B=n(68),N=n.n(B);function M(){var e=Object(A.a)(['\n    mutation CreateIssuePayload\n    {\n      createIssue(input:{repositoryId:"','", title: "','",body:" ','",labelIds: "','"}) {\n          issue{\n            id\n            number\n            title\n            bodyHTML\n            body\n            author{\n              login\n            }\n            createdAt\n            comments( ',") {\n              totalCount\n              edges{\n                node{\n                  bodyHTML\n                  author{\n                    login\n                  }\n                  reactions(content:HEART){\n                    totalCount\n                  }\n                  createdAt\n                }\n                cursor\n              }\n            }\n            reactions(content:HEART){\n              totalCount\n            }\n          }\n      }\n    }\n    "]);return M=function(){return e},e}function D(){var e=Object(A.a)(['\n        {\n          repository(owner: "','", name: "','") {\n              issue(',"){\n                id\n                number\n                title\n                bodyHTML\n                body\n                author{\n                  login\n                }\n                createdAt\n                comments( "," ",") {\n                  totalCount\n                  edges{\n                    node{\n                      bodyHTML\n                      author{\n                        login\n                      }\n                      reactions(content:HEART){\n                        totalCount\n                      }\n                      createdAt\n                    }\n                    cursor\n                  }\n                }\n                reactions(content:HEART){\n                  totalCount\n                }\n              }\n          }\n        }\n        "]);return D=function(){return e},e}function H(){var e=Object(A.a)(['\n        {\n          repository(owner: "','", name: "','") {\n              issues('," "," ",",orderBy:{field:CREATED_AT,direction:DESC}){\n                totalCount\n                pageInfo {\n                  endCursor\n                  startCursor\n                  hasNextPage\n                  hasPreviousPage\n                } \n                edges {\n                  node {\n                    id\n                    number\n                    title\n                    bodyHTML\n                    body\n                    author{\n                        login\n                    }\n                    createdAt\n                    comments {\n                     totalCount\n                    }\n                    reactions(content:HEART){\n                      totalCount\n                    }\n                  }\n                }\n              }\n          }\n        }\n        "]);return H=function(){return e},e}var P,G,L=function(){function e(t){Object(i.a)(this,e),this.owner=t.owner,this.name=t.name,this.labels=t.labels?',labels:"'.concat(t.labels,'"'):"",this.labelIds=t.labelIds?t.labelIds:"MDU6TGFiZWwxMzU2ODYzMTMz",this.repositoryId=t.repositoryId?t.repositoryId:"MDEwOlJlcG9zaXRvcnkxMjM4ODY3NzE=",this.graphql="",this.currentPage="first:10"}return Object(l.a)(e,[{key:"getIssues",value:function(e,t,n,a){return"next"===e?(t=t?"first:".concat(t):"",n=n?',after:"'.concat(n,'"'):""):(t=t?"last:".concat(t):"",n=n?',before:"'.concat(n,'"'):""),a=a?',labels:"'.concat(a,'"'):this.labels,console.log("gql set",a),N()(H(),this.owner,this.name,t,n,a)}},{key:"getIssue",value:function(e,t,n){return e="number:".concat(e),t=t?"first:".concat(t):"",n=n?',after:"'.concat(n,'"'):"",N()(D(),this.owner,this.name,e,t,n)}},{key:"setIssueAdd",value:function(e,t,n,a){if(t=t||"\u6ca1\u6709\u6807\u9898\u771f\u662f\u592a\u5947\u602a\u4e86",a=a||this.labelIds,n=n||this.repositoryId)return N()(M(),n,t,e,a,"first: 100");alert("\u9700\u8981\u4ed3\u5e93\u7684ID")}}]),e}(),R=n(90),_=n.n(R),q=function(e){var t=function(e){if(e){var t=_.a.AES.decrypt(e.token,e.key).toString(_.a.enc.Utf8),n=new T.a({uri:"https://api.github.com/graphql",headers:{Authorization:"Bearer ".concat(t)}});return{client:new x.a({link:n,cache:new O.a}),repos:new L(e)}}}(e);P=t.client,G=t.repos},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var n=e.type||"next",a=e.first||10,r=e.after;P.query({query:G.getIssues(n,a,r)}).then((function(e){t({type:v,data:e.data.repository.issues})}))}},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var n=e.number||6,a=e.first||10,r=e.after;P.query({query:G.getIssue(n,a,r)}).then((function(e){var n=e.data.repository.issue;t({type:b,data:n})}))}},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){console.log("\u589e\u52a0\u7684\u6570\u636edata",e);var n=e.content,a=e.title;P.mutate({mutation:G.setIssueAdd(n,a)}).then((function(e){console.log("\u589e\u52a0\u540e\u7684\u6570\u636e",e)}))}},W=function(e,t,n){return function(e){e({type:y})}},U=z,V=J,K=F,X=function(e){function t(e){var n;Object(i.a)(this,t),n=Object(u.a)(this,Object(d.a)(t).call(this,e));var a=e.match.params,r=a.number?a.number:6;return n.state={msg:"msg hhh",number:r},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.setIssue,t=this.state.number;console.log("Post\u521d\u59cb\u5316",t),e({number:t})}},{key:"handleClick",value:function(){this.setState({msg:"msg\u4fee\u6539"})}},{key:"render",value:function(){var e,t=this;if(this.props.state.setIssue.issue){var n=this.props.state.setIssue.issue;e=o.a.createElement(w.a,{className:"post-content"},o.a.createElement(w.a.Header,null,n.title),o.a.createElement(w.a.Title,null,n.createdAt),o.a.createElement(w.a.Body,{dangerouslySetInnerHTML:{__html:n.bodyHTML}}))}else e=o.a.createElement(w.a,null,"\u7b49\u7b49");return o.a.createElement(S.a,{className:"xx-space-post"},o.a.createElement(w.a,null,e),o.a.createElement(w.a,null,"\u653e\u8bc4\u8bba\u7684\u5730\u65b9"),o.a.createElement(j.a,{onClick:function(e){return t.handleClick(e)}},"Evernote"))}}]),t}(r.Component),Y=Object(h.b)((function(e){return console.log("state \u6620\u5c04",e),{state:e}}),(function(e,t){return{setIssue:function(t){e(K(t))}}}))(X),Z=n(278),Q=n(277),$=(n(167),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).toIndex=function(e){n.props.history.push("/")},n.toAddNewSpace=function(e){n.props.history.push("/edit/new")},n.state={title:"head",desc:"\u663e\u793a\u5173\u4e8e\u5e94\u7528\u4e2d\u7684\u5934\u90e8\u7684\u4fe1\u606f",message:"test",spaces:[]},console.log("props:",e,window.location.href),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return o.a.createElement(w.a,{className:"Header"},o.a.createElement(Q.a,null,o.a.createElement(j.a,{onClick:function(t){return e.toIndex(t)}},"\u9996\u9875"),o.a.createElement(j.a,{onClick:function(t){return e.toAddNewSpace(t)}},"\u65b0\u589e"),o.a.createElement(j.a,null,"\u767b\u5f55")))}}]),t}(r.Component)),ee=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).toGithubComment=function(e){var t="https://github.com/abearxiong/abearxiong.github.io/issues/"+e;window.open(t)},n.state={title:"\u9996\u9875",desc:"\u8fd9\u91cc\u662f\u663e\u793a\u5185\u5bb9\u7684\u4e3b\u9875",message:"test",spaces:[]},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.setIssues)();this.setState({addNewStyle:{position:"fixed",bottom:"40px",width:"100px",height:"100px",right:"40px",fontSize:"100px",border:"5px solid",borderRadius:"50%",lineHeight:"65px",textAlign:"center"}})}},{key:"handleClick",value:function(){alert("home")}},{key:"preClick",value:function(e,t){var n=this.props.setIssues,a={type:"previous"};a.after=t,n(a)}},{key:"nextClick",value:function(e,t){(0,this.props.setIssues)({after:t})}},{key:"addNewSpace",value:function(e){}},{key:"render",value:function(){var e,t=this,n="",a="",r="";if(this.props.state.setIssues.issues){var s=this.props.state.setIssues.issues,c=s.edges,i=s.pageInfo,l=s.totalCount;e=c.map((function(e,n){var a=new Date(e.node.createdAt);return o.a.createElement(w.a,{key:n,className:"space-item"},o.a.createElement(w.a.Header,{onClick:function(n){return t.toGithubComment(e.node.number)}},e.node.title),o.a.createElement(w.a.Title,null,a.toLocaleString()),o.a.createElement(w.a.Body,{dangerouslySetInnerHTML:{__html:e.node.bodyHTML}}),o.a.createElement(w.a.Footer,null,o.a.createElement(Z.a,{variant:"success",onClick:function(n){return t.toGithubComment(e.node.number)}},o.a.createElement("g-emoji",{alias:"heart","fallback-src":"https://github.githubassets.com/images/icons/emoji/unicode/2764.png",class:"emoji mr-1"},"\u2764\ufe0f"),e.node.reactions.totalCount),o.a.createElement(Z.a,{variant:"light",onClick:function(n){return t.toGithubComment(e.node.number)}},o.a.createElement("g-emoji",{class:"g-emoji",alias:"speech_balloon","fallback-src":"https://github.githubassets.com/images/icons/emoji/unicode/1f4ac.png"},"\ud83d\udcac"),e.node.comments.totalCount)))})),i.hasPreviousPage&&(a=o.a.createElement(j.a,{onClick:function(e){return t.preClick(e,i.startCursor)}},"\u4e0a\u4e00\u9875")),i.hasNextPage&&(n=o.a.createElement(j.a,{onClick:function(e){return t.nextClick(e,i.endCursor)}},"\u4e0b\u4e00\u9875")),r=o.a.createElement("div",null,l)}else e=o.a.createElement(w.a,null,"\u8bf7\u7a0d\u7b49");return o.a.createElement(S.a,{className:"xx-space"},o.a.createElement($,this.props),o.a.createElement(w.a,null,o.a.createElement(w.a.Body,null,e),o.a.createElement(Q.a,null,a,n),o.a.createElement(w.a.Footer,null,r)))}}]),t}(r.Component),te=Object(h.b)((function(e){return console.log("state \u6620\u5c04",e),{state:e}}),(function(e,t){return{setIssues:function(t){e(U(t))}}}))(ee),ne=n(279),ae=n(129),re=n(9).n.fromJSON({document:{nodes:[{object:"block",type:"paragraph",nodes:[{object:"text",leaves:[{text:"\u771f\u662f\u5f00\u5fc3\u554a"}]}]}]}}),oe=function(e){function t(e){var n;Object(i.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).getType=function(e){switch(e){case"*":case"-":case"+":return"list-item";case">":return"block-quote";case"#":return"heading-one";case"##":return"heading-two";case"###":return"heading-three";case"####":return"heading-four";case"#####":return"heading-five";case"######":return"heading-six";default:return null}},n.onChangeTitle=function(e){var t=e.target.value;t!==n.state.title&&localStorage.setItem("title",t),n.setState({title:t})},n.onValueChange=function(e){var t=e.value;if(t.document!==n.state.value.document){var a=JSON.stringify(t.toJSON());localStorage.setItem("content",a)}n.setState({value:t})},n.onClickAddNewPost=function(){var e=n.props.setIssueAdd,t=JSON.stringify(n.state.value.document);e({content:JSON.parse(t).nodes.map((function(e,t){return e.nodes[0].text})).join("\\r\\n"),title:n.state.title}),localStorage.removeItem("title"),localStorage.removeItem("content"),n.props.history.push("/")},n.renderBlock=function(e,t,n){var a=e.attributes,r=e.children;switch(e.node.type){case"block-quote":return o.a.createElement("blockquote",a,r);case"bulleted-list":return o.a.createElement("ul",a,r);case"heading-one":return o.a.createElement("h1",a,r);case"heading-two":return o.a.createElement("h2",a,r);case"heading-three":return o.a.createElement("h3",a,r);case"heading-four":return o.a.createElement("h4",a,r);case"heading-five":return o.a.createElement("h5",a,r);case"heading-six":return o.a.createElement("h6",a,r);case"list-item":return o.a.createElement("li",a,r);default:return n()}},n.onKeyDown=function(e,t,a){switch(e.key){case" ":return n.onSpace(e,t,a);case"Backspace":return n.onBackspace(e,t,a);case"Enter":return n.onEnter(e,t,a);default:return a()}},n.onSpace=function(e,t,a){var r=t.value,o=r.selection;if(o.isExpanded)return a();var s=r.startBlock,c=o.start,i=s.text.slice(0,c.offset).replace(/\s*/g,""),l=n.getType(i);return l?"list-item"===l&&"list-item"===s.type?a():(e.preventDefault(),t.setBlocks(l),"list-item"===l&&t.wrapBlock("bulleted-list"),void t.moveFocusToStartOfNode(s).delete()):a()},n.onBackspace=function(e,t,n){var a=t.value,r=a.selection;if(r.isExpanded)return n();if(0!==r.start.offset)return n();var o=a.startBlock;if("paragraph"===o.type)return n();e.preventDefault(),t.setBlocks("paragraph"),"list-item"===o.type&&t.unwrapBlock("bulleted-list")},n.onEnter=function(e,t,a){var r=t.value,o=r.selection,s=o.start,c=o.end;if(o.isExpanded)return a();var i=r.startBlock;return 0===s.offset&&0===i.text.length?n.onBackspace(e,t,a):c.offset!==i.text.length?a():"heading-one"!==i.type&&"heading-two"!==i.type&&"heading-three"!==i.type&&"heading-four"!==i.type&&"heading-five"!==i.type&&"heading-six"!==i.type&&"block-quote"!==i.type?a():(e.preventDefault(),void t.splitBlock().setBlocks("paragraph"))};var a=e.match.params,r=a.number?a.number:"new",s=new Date,c=Math.floor((s-1443365529298)/864e5)+1,l=s.getDay(),m="\u4f20\u8bf4\u4e4b\u65c5".concat(c," ").concat(["\u661f\u671f\u5929","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"][l]);return n.state={msg:"msg hhh",number:r,title:m,value:re,createAt:(new Date).toLocaleString(),titleStyle:{color:"#cccccc",fontSize:10}},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.setIssue,t=this.state.number;if("new"===t){var n=localStorage.getItem("title"),a=localStorage.getItem("conent");n&&this.setState({title:n}),a&&this.setState({content:a})}else e({number:t});console.log("Edit\u521d\u59cb\u5316",t)}},{key:"render",value:function(){var e=this,t=o.a.createElement(j.a,{onClick:function(t){return e.onClickAddNewPost(t)}},"\u589e\u52a0");if(this.props.state.setIssue.issue)this.props.state.setIssue.issue;return o.a.createElement(S.a,{className:"xx-space-Edit"},o.a.createElement($,this.props),o.a.createElement(w.a,null,o.a.createElement(w.a,{className:"Edit-content"},o.a.createElement(w.a.Header,null,o.a.createElement(ne.a.Control,{type:"text",onChange:function(t){return e.onChangeTitle(t)},placeholder:"\u6807\u9898",defaultValue:this.state.title})),o.a.createElement(w.a.Title,{style:this.state.titleStyle},this.state.createAt),o.a.createElement(w.a.Body,null,o.a.createElement(ae.a,{placeholder:"hhh",value:this.state.value,onChange:this.onValueChange})),o.a.createElement(w.a.Footer,null,o.a.createElement(w.a,null,o.a.createElement(Q.a,null,t))))))}}]),t}(r.Component),se=Object(h.b)((function(e){return console.log("state \u6620\u5c04",e),{state:e}}),(function(e,t){return{setIssue:function(t){e(K(t))},setIssueAdd:function(t){e(V(t))}}}))(oe),ce=(n(271),{key:"xx-space",token:"U2FsdGVkX19B3HPXWKdG/BW8oy5ld+5t4WogKry+ve6B0RWRGtSjQlGr32zwr4nn7zBE9woFkj4mWNj8jZv1dg==",owner:"abearxiong",name:"abearxiong.github.io",labels:"xx-space"}),ie=function(e){function t(e){var n;return Object(i.a)(this,t),n=Object(u.a)(this,Object(d.a)(t).call(this,e)),q(ce),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return o.a.createElement(h.a,{store:k},o.a.createElement(I.a,null,o.a.createElement(C.d,null,o.a.createElement(C.b,{path:"/",exact:!0,component:te}),o.a.createElement(C.b,{path:"/post/:number",component:Y}),o.a.createElement(C.b,{path:"/edit/:number",component:se}),o.a.createElement(C.a,{to:"/"}))))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(ie,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[132,1,2]]]);
//# sourceMappingURL=main.c0618ce9.chunk.js.map